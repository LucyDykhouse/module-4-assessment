<!DOCTYPE html>
<html>
  <head>
    <title>Back End Assessment</title>
    <link rel="stylesheet" href="../styles.css"/>
  </head>
  <body class="container">

    <!--Define user inputs-->
    <div id="user-inputs">

      <!--Define buttons-->
      <button id="complimentButton">Get a compliment</button>
      <button id="fortuneButton">Get a fortune</button>

      <!--Define forms-->
      <form id="date-form">
        <input id="month-list" type="text" value="November">
        <input id="date-list" type="text" value="11/8 - 11/14">
        <input type="submit" value="Submit">
      </form>

      <form id="event-form">
        <input id="event" type="text" value="Enter event here">
        <select id="event-day" name="days">
          <option value="monday">Monday</option>
          <option value="tuesday">Tuesday</option>
          <option value="wednesday">Wednesday</option>
          <option value="thursday">Thursday</option>
          <option value="friday">Friday</option>
          <option value="weekend">Weekend</option>
        </select>
        <input id="event-time" type="text" value="10:00">
        <input type="submit" value="Submit">
      </form>

      <!--Script to handle compliment button-->
      <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
      <script>
        document.getElementById("complimentButton").onclick = function () {
          axios.get("http://localhost:4000/api/compliment/")
              .then(function (response) {
                const data = response.data;
                alert(data);
              });
        };
      </script>

      <!--Script to handle fortune button-->
      <script>
        document.getElementById("fortuneButton").onclick = function () {
          axios.get("http://localhost:4000/api/fortune/")
              .then(function (response) {
                const data = response.data;
                alert(data);
              });
        };
      </script>

      <!--Script to handle entered dates-->
      <script>
        const dateForm = document.getElementById("date-form");
        dateForm.addEventListener('submit', (evt) => {
          evt.preventDefault();
          let monthValue = document.querySelector("#month-list");
          let dateValue = document.querySelector("#date-list");
          let month = document.querySelector("#month");
          let dates = document.querySelector("#dates");
          console.log(monthValue.value);
          month.textContent = monthValue.value;
          dates.textContent = dateValue.value;

          monthValue.value = "";
          dateValue.value = "";

        });
      </script>

      <!--Script to post an event to the calendar-->
      <script>
        const eventForm = document.querySelector("#event-form");

        const createEvt = (body) => {
          axios.post("http://localhost:4000/api/events/", body)
               .then(function(res) {
                  let newListItem = document.createElement('li');
                  newListItem.textContent = `${res.data.time}: ${res.data.name}`;
                  let dayOfEvent = document.querySelector(`#${res.data.day}-ul`);
                  dayOfEvent.appendChild(newListItem);
                });
        }

        function submitHandler(e) {
        e.preventDefault();
        let eventBody = document.querySelector("#event");
        let eventDay = document.querySelector("#event-day");
        let eventTime = document.querySelector("#event-time");

        let bodyObj = {
          evtName: eventBody.value,
          evtDay: eventDay.value,
          evtTime: eventTime.value
        };

        createEvt(bodyObj);

        eventBody.value = "";
        eventDay.value = "monday";
        eventTime.value = "";
        }

        eventForm.addEventListener('submit', submitHandler);
      </script>


    </div>

    <!--Script to construct calendar-->
    <header class="title"> 
      <h1 id="month">Month</h1>
      <h3 id="dates">Dates</h3>
    </header>
    <div class="days-list">
      <section class="day-box">
        <div id="Monday">Monday</div>
        <div class="day-activities">
          <ul id="monday-ul"></ul>
        </div>
      </section>
      <section class="day-box">
        <div id="Tuesday">Tuesday</div>
        <div class="day-activities">
          <ul id="tuesday-ul"></ul>
        </div>
      </section>
      <section class="day-box">
        <div id="Wednesday">Wednesday</div>
        <div class="day-activities">
          <ul id="wednesday-ul"></ul>
        </div>
      </section>
      <section class="day-box">
        <div id="Thursday">Thursday</div>
        <div class="day-activities">
          <ul id="thursday-ul"></ul>
        </div>
      </section>
      <section class="day-box">
        <div id="Friday">Friday</div>
        <div class="day-activities">
          <ul id="friday-ul"></ul>
        </div>
      </section>
      <section class="day-box">
        <div id="Weekend">Weekend</div>
        <div class="day-activities">
          <ul id="weekend-ul"></ul>
        </div>
      </section>
    </div>
  </body>
</html>
